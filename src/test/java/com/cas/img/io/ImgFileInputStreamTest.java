package com.cas.img.io;

import com.cas.des.des3_ecb.HexConverter;
import org.junit.Test;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Arrays;

/**
 * @author xiang_long
 * @version 1.0
 * @date 2022/3/30 6:43 下午
 * @desc
 */
public class ImgFileInputStreamTest {


    @Test
    public void test1() {
        String path = "/Users/xianglong/IdeaProjects/cas-test/src/test/java/com/cas/img/io/img3.jpg";
        File file = new File(path);
        // 自动关闭流
        try (FileInputStream fis = new FileInputStream(file);) {
            //从代码形式看，使用read(byte[] b)较为直观和简便，因此项目中可以此方法为主进行数据读取
            int n = 0;
            // 通过文件长度指定字节长度
            byte[] b = new byte[(int) file.length()];
            while (n != -1) {
                // 这里的read(byte []) 会读取指定长度的字节，并赋值给输入的字节数组，并返回读取长度
                n = fis.read(b);
            }
            String hexString = "FFD8FFE000104A46494600010200000100010000FFDB004300080606070605080707070909080A0C140D0C0B0B0C1912130F141D1A1F1E1D1A1C1C20242E2720222C231C1C2837292C30313434341F27393D38323C2E333432FFDB0043010909090C0B0C180D0D1832211C213232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232FFC00011080076006003012200021101031101FFC4001F0000010501010101010100000000000000000102030405060708090A0BFFC400B5100002010303020403050504040000017D01020300041105122131410613516107227114328191A1082342B1C11552D1F02433627282090A161718191A25262728292A3435363738393A434445464748494A535455565758595A636465666768696A737475767778797A838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE1E2E3E4E5E6E7E8E9EAF1F2F3F4F5F6F7F8F9FAFFC4001F0100030101010101010101010000000000000102030405060708090A0BFFC400B51100020102040403040705040400010277000102031104052131061241510761711322328108144291A1B1C109233352F0156272D10A162434E125F11718191A262728292A35363738393A434445464748494A535455565758595A636465666768696A737475767778797A82838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE2E3E4E5E6E7E8E9EAF2F3F4F5F6F7F8F9FAFFDA000C03010002110311003F00F5E90172CE5CB1DA0E3391EF9F7F614798CB90572472594E7E87FCF4A5789B6072A228D8E36AF5C1A72AF9614BE36F43D81F4E6B42C8D18BAF96AA4E0965F4EB9EBFE4D3E531C68D2B851181F3338C28A1D98C1BC145861CFCC4E063B9FF00F5D787FC47F8946F1E4D2F4999CDA838966C91E61F6F6A096CED757F8A1A1E992FD9A057BF284FCC876C63DBDEBCFF0057F8B7ACDE48DF66912CA32DF720EB8F763C9AF2B9F539E4246FC8AAC24989DDF31FC28BA44AB9EA365F14BC4D653993ED29731B1198E78C1007B11D2BD1FC31F17ED35DB94B5D421FB05C30DBBC36633F89E95F36BDD4A50044618EFCD4F677A431591B69ED439260D33ED385FED0ACCB3828CB9CAE08F6A7A2CA08C382720B03D0935F337833C7F7DE1DD40473BC925AB6049116278F6F4AFA2746D4A0D5ACEDEFACA65920941604E7AFFF005BA5211A21DE2882155CE7B03F9D3818C9E0907D7246169A5D9986F030C3823D3BD2EDEBCB0EE40E868028F9C8C19644C10B8C06C918F527A7D2A40AB3005E42E0721D863FEF95A6A08599411B5B391E9F80FEA69658C2066DDD0127B903EBDA8356799FC5EF16BE91609A45AB2ADCDD2133B672447D3BF233FD0D7CF924B25DBADBDB82CCC71815AFE34D66E75EF156A372EE5F13346A41EA8A485FD07EB5D2FC3CF0BABB7DBEE23CB7F003DAA272E5428C79A41E1AF8709340971A912CCC33E581915D945E0FD2E18BCB5B0423D715D75B5A2220C8E31D2A636E84F0315CB29391D71825A1C24DE0FB18E33B2D5066B85D77C2B1C529644D841EC2BDBE48429C633581AE69893C4CCABCD4C64D17ECE2CF1816B22A6C7C6E4E413DFDABD6BE12F88A7B5BB6D1E774FB34E0BC459B043F19519EC7FC7D78E3759B011584D322F28339ACAD2F54922B982683026B69048BEE735D34E57392AC394FAB8306383C67B67FCF4A700CA8AC58E3A0C8E6A9699702FF004DB4BB3C79B187CE33D6AE10FBB86C29E840E9FF00D7AD8C0ACD14654900018EA0E17F16EFF854536E6D26E0360858DC6E2D85E07EBF8D5C8636F255DDB040EBD4E07719E99A60522CDD9D63903024E7A9148D4F8EEDAC9E6D6E489B0CED36DF6C935EF3A2E9A9A6E95121187000207AD705A4E8B2FF00C27D13496AD042CF24A91B76009C57A8DDBC70C5963D3B0ACAABD4D6947A91FF006AC48C17CA773FDD5AB71C9E726FD8533D8D71FABEBD776C216B6D3D4EF9029677E547AF02B7F48BD6961FDF8C3679C74AC1B3A0D3270091D45645E497058811EFCFA0E95A37132F94C10F38AE26F753D7A3D5E14B6F28DB3643968B763A73D475A94AEC2E3B54D2259ED6587CBFF5A3D3A5799EA566FA56AE63504295C0FC2BDAACAF64B8F96EE1119E808E8DEF5CE7C43D261FEC682EA08C0912424B7FB241FEB8ADA96E65555D1EA5E01BC1A8781B4B915080B088CE4F523835D104DBB54724F207A7BD717F0BAE43783A0B6DF96889DCCA38E4F4AED88DEB807AF5238E2BA0E36889E3F2E454898F39C827231430695C2A4580A7E607F95199219761CC8D2124B8FE1FC2A29576858801B9BF888208F7A459CCEABA35BC5AFAEA08172F1B74EC7BD549E1F30E4807DABA4D5E256B456000319F4ED585FC58AC6A6875527A1992DA24B80CA38A1A3485372AE2AC49C3B60679A8DE58D190499C31C600CD60745911A7EF57A75A1AD515BEE026A47781244450EBB8750BC53B39CF5CFA9A5B09446C76A18E70322A0D5EC56F34CF25D7728CD5C42412077AD0B0B613BC71B28625B915AC08ABA237740D263D1F4782DE25000196DA3A935A8C7DFAFA8A722055C05F971D9A91F2A370701BB0615D28F3DEA538776D5672C188C9C1E3FCE29E143484176CE38DD4843A970C5514007E6FD47A53A36C424AA131E327231FAF7A6515EFE067B099720EE53820F735C87998041CE7B576EB1858882C803740BD2B87BB46B6BC923652B863838C022B0AC74507D08D894E58E3DEAA3DDA2BE5581AB3788B736E17711F43595A7DB3696CE1489031CFEF06EC5651B3DCE9BB2DADF24A76F0A2A65B88DC61181E7B5413C8D34657CB88641190B55F4DD3859FF1BB63FBC734492046A7A574DE1A8374725C30C9070B91D2B9A2DBD801F418AEE74AB56B3D3A38CFDE3C9FA9AAA4AECCABC972978038F4FA535F3D980CF049A7018E7BD318AE0B37007F17A574F5384A52111A871E5EF53C927713EB53190EE3991C8F455A633A412E32183F207A1FF0ACBD575CD3F47B5371A96A30DAA21CE19C03FEEFAFF8D329B34D3E58B1E595039DCC71F4AE0F56D7AD753F10DD59DA9576B58C6F743C163DBF0AE7BC5FF162D459CB6FA0EE7670C0CF28EC7FBA3FAD715F0AEF3CFD67515918991C06C93EF51563EE9549FBC7A8A49C633823AE6A511A3AFCC68B9B5F30FC8B83EA2AA3C777080179FC6B8B98EE45A304639C8A8E495138DD55435DB9E78F5A963B466C9725A8B8365FD26E6D61BD8A6BC60B086C65BA03D057A2065DB90463B1AF09F88570F69E129FCA628DB94023EB5A9F0DBE28C12E930D8EBB3ED650152E1F9047FB5FE35D34568725667B0FDF18639C77F4A42C53E5EFEBEB55E0BEB5BB4592DEE62951977028C0E47AF153B31D99ADEC739F3778CBE20F8820D7B59B08F51922861BB961454DA0ED572A0640CF403BD79ACFA8DCEA379BEE267932724B364D69F8DA52DE33D7C631FF00131B8007FDB46AC5863D8BCF535A58572ECF2FEE76E7A70056B7C3BD40D978A87CD812A9435CF31E0D5CF0C46D27886DCA1E55B77E551557B8553F88FA52DA612C639C9A94807922B274E76DA8C4FCBC56B66BCB67A0838EE28240524F4A4760A324D529A672ACD9E074148679FF00C53D41174316C0F324838AF36D326296C57DABA9F890CF3C8931FF0054A7601DB3DEB8DB6701001C57A343E1386BEE6BDA789754D0EF12E2C6F258307F84D7A7F873E36DC47188B59B417200E248C856FC47435E3B346255391D6A9C1232398CE4115B2D4C11EBBE22F831E24BEF146A37C2FB4BF26EEEE59D434B206C33923236633CFAD67C9F053C4A4E7ED9A463FEBB49FF00C6E8A2A91764447E09F8949E2FB49C7FD7493FF88AB1A6FC1BF14E9DA8477715EE919439C19A4E7D7FE59D14529EA8B8AD4F51B0F0FDF411AAB3DB93DC6E6C0FD2B486977607260F4E18FF008514571BA71EC75A6C6CBA2DD4801DF08EDF78FF00854136817450AA490E48C72C7FC28A2B3E48DC5CCCF38F13FC2BF13EB77DBA2BBD2E3B78F85469E4E4FA9023C66B263F81DE2750A7EDFA471FF4DA4FFE374515D94D248E6A9A96C7C13F129520DF693FF7F64FFE375565F811E2776DCB7FA406C649334BFF00C6E8A2AD19D8FFD9";
            System.out.println("最终结果： " + hexString);
            udpate(HexConverter.hexString2ByteArray(hexString));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void udpate(byte[] data) {
        String path2 = "/Users/xianglong/IdeaProjects/cas-test/src/test/java/com/cas/img/io/3.jpg";
        File file = new File(path2);
        try {
            if (!file.exists()) {
                file.createNewFile();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            FileOutputStream fos = new FileOutputStream(file);
            fos.write(data);
            fos.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }


}
